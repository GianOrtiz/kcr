kind: Cluster
apiVersion: kind.x-k8s.io/v1alpha4
featureGates:
  ContainerCheckpoint: true
nodes:
  - role: control-plane
    kubeadmConfigPatches:
    - |
      kind: InitConfiguration
      nodeRegistration:
        criSocket: unix:///var/run/crio/crio.sock
  - role: worker
    extraMounts:
    - hostPath: /var/lib/kubelet/checkpoints
      containerPath: /var/lib/kubelet/checkpoints
    kubeadmConfigPatches:
    - |
      kind: JoinConfiguration
      nodeRegistration:
        criSocket: unix:///var/run/crio/crio.sock
    extraPortMappings:
        - containerPort: 10250
          hostPort: 10250
          protocol: TCP

